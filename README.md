# lmk_bot
Приветствую. Данный проект был разработан для оптимизации взаимодействия студентов и преподавателей Липецкого металлургического колледжа с заменами.

Для запуска вам необходимо:
  1) Загрузить Python на ваш компьютер/сервер https://www.python.org/downloads
  2) Создать бота в телеграмме https://t.me/BotFather
  3) Скачать проект

Запускается бот через файл `main.py`  

Замены на предыдущий день будут работать после того, как бот загрузит новые замены, до тех пор он будет выдавать ошибки.

# Структура проекта
| Файл/Папка            | Описание                                              |
| --------------------- | ----------------------------------------------------- |
| `arhiv/`              | Архив прошлых замен                                   |
| `bd/`                 | База данных проекта                                   |
| `png_zam/`            | Замены в формате `.png`                               |
| `schedule/`           | Расписание занятий                                    |
| `zam/`                | Актуальные замены                                     |
| `.env`                | Конфигурационный файл с токеном бота (скрыт системой) |
| `.gitignore`          | Список игнорируемых файлов для Git                    |
| `bot.py`              | Основная логика бота                                  |
| `button.py`           | Конфигурация кнопок быстрого доступа                  |
| `callbacks.py`        | Обработка взаимодействий с кнопками                   |
| `calls.png`           | Картинка с расписанием звонков                        |
| `commands.py`         | Обработка команд бота                                 |
| `config.py`           | Конфигурация проекта                                  |
| `download.py`         | Скачивание расписания и замен с сайта                 |
| `main.py`             | Главный файл запуска бота                             |
| `message_handlers.py` | Обработка текстовых сообщений                         |
| `read.py`             | Получение данных о заменах                            |
| `req`                 | Список зависимостей (загружаются автоматически)       |
| `scripts.py`          | Дополнительные функции                                |
| `spam.py`             | Система уведомлений                                   |
| `SQL.py`              | SQL-запросы для работы с базой данных                 |

# Структура базы данных
| Таблица               | Описание                                                                 |
| --------------------- | ------------------------------------------------------------------------ |
| `all_users`           | Данные пользователей                                                     |
| `days`                | Название текущих и прошлых замен                                         |
| `errors`              | Сохранёные ошибки                                                        |
| `last_replacements`   | Прошлые замены                                                           |
| `prepods`             | Список всех преподавателей                                               |
| `prepods_cabinet`     | Кабинеты преподавателей                                                  |
| `replacements`        | Текущие замены                                                           |
| `schedule`            | Расписание занятий                                                       |
| `spam`                | Сохранёные замены для конкретных запросов (используется для уведомлений) |
| `spam_requests`       | Запросы пользователей для уведомлений                                    |

# Коментарий
В проекте есть много моментов, которые можно оптимизировать, но так как многие моменты делались на скорую руку, то получилось, что получилось. Присутствует много костылей, которые нужны для обработки случайных ошибок в заменах/расписании.

Для тестов можете использовать мой архив с заменами https://disk.yandex.ru/d/czErhX3Z_asHzw

Если есть вопросы по проекту, то можете обращаться: https://t.me/skripuch
